//
//  RMAutolayoutCell.m
//  Redmadrobot
//
//  Created by Dmitry Shashlov on 11/18/14.
//  Copyright (c) 2014 Dmitry Shashlov. All rights reserved.
//

#import "RMAutolayoutCell.h"

@interface RMAutolayoutCell()
@property (nonatomic) BOOL didSetupConstraints;
@end

@implementation RMAutolayoutCell

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - Constraints

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
- (void)updateConstraints
{
  [super updateConstraints];
  
  if (self.didSetupConstraints) {
    return;
  }
  
  [self setupConstraints];
  self.didSetupConstraints = YES;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
- (void)setupConstraints
{
  // Setup constraints here
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
- (void)clearConstraints
{
  self.didSetupConstraints = NO;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - Layout

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
- (void)layoutSubviews
{
  [super layoutSubviews];
  
  [self.contentView setNeedsLayout];
  [self.contentView layoutIfNeeded];
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
- (void)layoutWithWidth:(CGFloat)width
{
  [self setNeedsUpdateConstraints];
  [self updateConstraintsIfNeeded];
  self.bounds = CGRectMake(0.0f, 0.0f, width, CGRectGetHeight(self.bounds));
  [self setNeedsLayout];
  [self layoutIfNeeded];
}

@end

//
//  RMCollage.m
//  Redmadrobot
//
//  Created by Dmitry Shashlov on 11/19/14.
//  Copyright (c) 2014 Dmitry Shashlov. All rights reserved.
//

#import "RMCollage.h"

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////

@implementation RMCollageSector

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - Init

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
- (id)initWithMedia:(InstagramMedia *)media indexPath:(NSIndexPath *)indexPath
{
  self = [super init];
  if (self)
  {
    _media = media;
    _indexPath = indexPath;    
  }
  return self;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
- (id)initWithCoder:(NSCoder *)aDecoder
{
  self = [super init];
  if (self)
  {
    _indexPath = [aDecoder decodeObjectForKey:@"indexPath"];
    _media = [aDecoder decodeObjectForKey:@"media"];
  }
  return self;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - Encoding

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
- (void)encodeWithCoder:(NSCoder *)aCoder
{
  [aCoder encodeObject:_indexPath forKey:@"indexPath"];
  [aCoder encodeObject:_media forKey:@"media"];
}

@end

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////

@implementation RMCollage

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - Init

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
- (id)initWithSize:(NSNumber *)size
{
  self = [super init];
  if (self)
  {
    _size = size;
    
    NSMutableArray *sectorsMutable = [[NSMutableArray alloc] init];
    for (int i = 0; i < size.intValue; i++) {
      for (int n = 0; n < size.intValue; n++) {
        [sectorsMutable addObject:[[RMCollageSector alloc] initWithMedia:nil
                                                               indexPath:[NSIndexPath indexPathForRow:n inSection:i]]];
      }
    }
    _sectors = [NSArray arrayWithArray:sectorsMutable];
  }
  return self;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
- (id)initWithCoder:(NSCoder *)aDecoder
{
  self = [super init];
  if (self)
  {
    _size = [aDecoder decodeObjectForKey:@"size"];
    _sectors = [aDecoder decodeObjectForKey:@"sectors"];
  }
  return self;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#pragma mark - Encoding

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
- (void)encodeWithCoder:(NSCoder *)aCoder
{
  [aCoder encodeObject:_size forKey:@"size"];
  [aCoder encodeObject:_sectors forKey:@"sectors"];
}

@end
